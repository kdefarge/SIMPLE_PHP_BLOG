{% extends "base.html" %}

{% block title %}Blog - article{% endblock %}

{% block content %}

<h1 class="mt-4">{{ post.GetTitle() }}</h1>

{% if post.GetUser().GetName() %}
    <p class="lead"> par {{ post.GetUser().GetName() }} </p>
{% endif %}

<hr>

<p>Mis à jour le {{ post.GetUpdated()|date('d/m/y à H\\Hi') }}</p>

<hr>

<p class="lead">{{ post.GetContent()|nl2br }}</p>

<hr>

<div class="card my-4">
    <h5 class="card-header" id="comment_section">Publié un commentaire :</h5>
    <div class="card-body">
        <form method="post" action="?page=postread">
            <input type="hidden" name="postid" value="{{ post.GetID() }}">
            <div class="form-group">
                <textarea class="form-control" rows="3" name="text">{{ m_post.text }}</textarea>
            </div>
            <button type="submit" class="btn btn-primary">Commenter</button>
        </form>
    </div>
</div>

{% for comment in comments %}
    <div class="media mb-4">
        <div class="media-body">
            <h6 class="mt-0">
                <small>Par</small>
                {{ comment.GetUser().GetName() }}
                <small><i>le {{ comment.GetPosted()|date('d/m/y à H\\Hi') }}</i></small>
            </h6>
            <p class="text-break">{{ comment.GetText()|nl2br }}</p>
        </div>
    </div>
    <hr>
{% endfor %}

{% endblock %}